2025-08-20 13:29:26 - root - ERROR - main:171 - Fatal error occurred
Traceback (most recent call last):
  File "C:\BluePharmaBot\main.py", line 162, in main
    bot = BluePharmaBot()
          ^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\bot.py", line 45, in __init__
    self.setup_handlers()
  File "C:\BluePharmaBot\bot.py", line 62, in setup_handlers
    self.application.add_handler(CommandHandler("wholesale_check", self.wholesale_check))
                                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'BluePharmaBot' object has no attribute 'wholesale_check'
2025-08-20 13:51:16 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:52:57 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:53:03 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:53:40 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:54:11 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:55:36 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-20 13:59:38 - bot - ERROR - error_handler:961 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-21 14:53:51 - telegram.ext.Updater - ERROR - _network_loop_retry:728 - Error while getting Updates: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-21 14:53:51 - bot - ERROR - error_handler:1077 - Exception while handling an update: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-21 15:59:51 - telegram.ext.Updater - ERROR - _network_loop_retry:728 - Error while getting Updates: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-21 15:59:52 - bot - ERROR - error_handler:1077 - Exception while handling an update: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-21 17:41:01 - root - ERROR - main:171 - Fatal error occurred
Traceback (most recent call last):
  File "C:\BluePharmaBot\main.py", line 162, in main
    bot = BluePharmaBot()
  File "C:\BluePharmaBot\bot.py", line 44, in __init__
    self.application = Application.builder().token(config.BOT_TOKEN).build()
                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_applicationbuilder.py", line 312, in build
    updater = Updater(bot=bot, update_queue=update_queue)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_updater.py", line 128, in __init__
    self.__polling_cleanup_cb: Optional[Callable[[], Coroutine[Any, Any, None]]] = None
    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Updater' object has no attribute '_Updater__polling_cleanup_cb' and no __dict__ for setting new attributes
2025-08-21 17:47:42 - bot - ERROR - error_handler:1319 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-21 18:24:47 - bot - ERROR - error_handler:1440 - Exception while handling an update: 'NoneType' object has no attribute 'reply_text'
2025-08-21 18:45:36 - bot - ERROR - error_handler:1440 - Exception while handling an update: Can't parse entities: can't find end of the entity starting at byte offset 11
2025-08-21 18:49:31 - bot - ERROR - error_handler:1440 - Exception while handling an update: Can't parse entities: can't find end of the entity starting at byte offset 11
2025-08-22 17:23:54 - bot - ERROR - error_handler:1682 - Exception while handling an update: 'EnhancedOrderSystem' object has no attribute 'start_enhanced_order'
2025-08-22 17:24:08 - bot - ERROR - error_handler:1682 - Exception while handling an update: 'EnhancedOrderSystem' object has no attribute 'start_enhanced_order'
2025-08-22 17:24:09 - bot - ERROR - error_handler:1682 - Exception while handling an update: 'EnhancedOrderSystem' object has no attribute 'start_enhanced_order'
2025-08-22 17:26:44 - bot - ERROR - error_handler:1683 - Exception while handling an update: 'Update' object has no attribute 'data'
2025-08-22 17:28:31 - bot - ERROR - error_handler:1683 - Exception while handling an update: 'Update' object has no attribute 'from_user'
2025-08-22 17:28:46 - bot - ERROR - error_handler:1683 - Exception while handling an update: 'Update' object has no attribute 'from_user'
2025-08-22 18:29:31 - enhanced_order_system - ERROR - notify_admins_cart_order:1376 - Failed to send cart order notification to admin 0: name 'config' is not defined
2025-08-22 18:29:31 - enhanced_order_system - ERROR - notify_admins_cart_order:1376 - Failed to send cart order notification to admin 7264670729: name 'config' is not defined
2025-08-22 18:29:31 - enhanced_order_system - ERROR - notify_admins_cart_order:1376 - Failed to send cart order notification to admin 0: name 'config' is not defined
2025-08-22 18:29:31 - enhanced_order_system - ERROR - notify_admins_cart_order:1376 - Failed to send cart order notification to admin 7264670729: name 'config' is not defined
2025-08-22 18:35:44 - enhanced_order_system - ERROR - notify_admins_cart_order:1380 - Failed to send cart order notification to admin 0: Chat not found
2025-08-22 18:35:45 - enhanced_order_system - ERROR - notify_admins_cart_order:1380 - Failed to send cart order notification to admin 0: Chat not found
2025-08-22 18:37:38 - enhanced_order_system - ERROR - notify_admins_cart_order:1380 - Failed to send cart order notification to admin 0: Chat not found
2025-08-22 18:37:40 - enhanced_order_system - ERROR - notify_admins_cart_order:1380 - Failed to send cart order notification to admin 0: Chat not found
2025-08-22 19:44:25 - bot - ERROR - error_handler:1694 - Exception while handling an update: Query is too old and response timeout expired or query id is invalid
2025-08-22 20:41:12 - bot - ERROR - error_handler:1694 - Exception while handling an update: httpx.ReadError: 
2025-08-22 21:27:47 - bot - ERROR - error_handler:1694 - Exception while handling an update: httpx.ReadError: 
2025-08-22 21:28:19 - bot - ERROR - error_handler:1694 - Exception while handling an update: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 21:30:21 - telegram.ext.Application - CRITICAL - stop:675 - Fetching updates was aborted due to KeyboardInterrupt(). Suppressing exception to ensure graceful shutdown.
Traceback (most recent call last):
  File "C:\BluePharmaBot\database\db_init.py", line 403, in log_audit
    cursor.execute('''
    ~~~~~~~~~~~~~~^^^^
        INSERT INTO audit_logs
        ^^^^^^^^^^^^^^^^^^^^^^
        (user_id, action, table_affected, record_id, old_values, new_values)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        VALUES (?, ?, ?, ?, ?, ?)
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, action, table_affected, record_id, old_values, new_values))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 673, in stop
    self.__update_fetcher_task.result()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1228, in _update_fetcher
    await self.__update_fetcher()
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1224, in __update_fetcher
    await self.__process_update_wrapper(update)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1239, in __process_update_wrapper
    await self._update_processor.process_update(update, self.process_update(update))
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 170, in process_update
    await self.do_process_update(update, coroutine)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 195, in do_process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\bot.py", line 182, in start
    user_data = self.user_manager.get_or_create_user(
        telegram_id, user.username, user.first_name, user.last_name
    )
  File "C:\BluePharmaBot\user_manager.py", line 87, in get_or_create_user
    self.db.log_audit(user_id, "User created", "users", user_id, None,
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    f"New user: {first_name} {last_name} (@{username})")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\database\db_init.py", line 411, in log_audit
    print(f"Error logging audit: {e}")
                                 ^^^
KeyboardInterrupt
2025-08-22 21:32:14 - telegram.ext.Application - CRITICAL - stop:675 - Fetching updates was aborted due to KeyboardInterrupt(). Suppressing exception to ensure graceful shutdown.
Traceback (most recent call last):
  File "C:\BluePharmaBot\database\db_init.py", line 403, in log_audit
    cursor.execute('''
    ~~~~~~~~~~~~~~^^^^
        INSERT INTO audit_logs
        ^^^^^^^^^^^^^^^^^^^^^^
        (user_id, action, table_affected, record_id, old_values, new_values)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        VALUES (?, ?, ?, ?, ?, ?)
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, action, table_affected, record_id, old_values, new_values))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 673, in stop
    self.__update_fetcher_task.result()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1228, in _update_fetcher
    await self.__update_fetcher()
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1224, in __update_fetcher
    await self.__process_update_wrapper(update)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1239, in __process_update_wrapper
    await self._update_processor.process_update(update, self.process_update(update))
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 170, in process_update
    await self.do_process_update(update, coroutine)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 195, in do_process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\bot.py", line 182, in start
    user_data = self.user_manager.get_or_create_user(
        telegram_id, user.username, user.first_name, user.last_name
    )
  File "C:\BluePharmaBot\user_manager.py", line 87, in get_or_create_user
    self.db.log_audit(user_id, "User created", "users", user_id, None,
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    f"New user: {first_name} {last_name} (@{username})")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\database\db_init.py", line 411, in log_audit
    print(f"Error logging audit: {e}")
                                 ^^^
KeyboardInterrupt
2025-08-23 15:28:29 - root - ERROR - main:171 - Fatal error occurred
Traceback (most recent call last):
  File "C:\BluePharmaBot\main.py", line 162, in main
    bot = BluePharmaBot()
  File "C:\BluePharmaBot\bot.py", line 68, in __init__
    self.setup_handlers()
    ~~~~~~~~~~~~~~~~~~~^^
  File "C:\BluePharmaBot\bot.py", line 138, in setup_handlers
    self.enhanced_add_medicine_handler.add_handlers(self.application)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\enhanced_add_medicine.py", line 59, in add_handlers
    MessageHandler(filters.Document.FileExtension(["xlsx", "xls", "csv"]), self.handle_bulk_file)
                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\filters.py", line 1259, in __init__
    self.name = f"filters.Document.FileExtension({file_extension.lower()!r})"
                                                  ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'lower'
2025-08-23 15:35:03 - bot - ERROR - error_handler:1681 - Exception while handling an update: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-23 15:35:04 - bot - ERROR - error_handler:1681 - Exception while handling an update: httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-23 17:12:22 - telegram.ext.Application - ERROR - process_error:1929 - An error was raised and an uncaught error was raised while handling the error with an error_handler.
Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
                 ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: error_handler.<locals>.decorator() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1925, in process_error
    await callback(update, context)
  File "C:\BluePharmaBot\bot.py", line 1691, in error_handler
    error_id, user_message = await error_handler.handle_command_error(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'handle_command_error'
2025-08-23 17:15:49 - telegram.ext.Application - ERROR - process_error:1929 - An error was raised and an uncaught error was raised while handling the error with an error_handler.
Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
                 ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: error_handler.<locals>.decorator() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1925, in process_error
    await callback(update, context)
  File "C:\BluePharmaBot\bot.py", line 1694, in error_handler
    error_id, user_message = await self.enhanced_error_handler.handle_command_error(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ErrorHandler' object has no attribute 'handle_command_error'
2025-08-23 17:16:19 - telegram.ext.Application - ERROR - process_error:1929 - An error was raised and an uncaught error was raised while handling the error with an error_handler.
Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
                 ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: error_handler.<locals>.decorator() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1925, in process_error
    await callback(update, context)
  File "C:\BluePharmaBot\bot.py", line 1694, in error_handler
    error_id, user_message = await self.enhanced_error_handler.handle_command_error(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ErrorHandler' object has no attribute 'handle_command_error'
2025-08-23 17:27:29 - error_handlers - ERROR - log_error:139 - ERROR 20250823_172729_037186: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 17:30:01 - root - ERROR - main:67 - Bot startup failed
Traceback (most recent call last):
  File "C:\BluePharmaBot\start_bot.py", line 53, in main
    bot.run()
    ~~~~~~~^^
  File "C:\BluePharmaBot\bot.py", line 2498, in run
    self.application.run_polling()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 839, in run_polling
    return self.__run(
           ~~~~~~~~~~^
        updater_coroutine=self.updater.start_polling(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
        close_loop=close_loop,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1056, in __run
    loop.run_until_complete(self.start())
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 631, in start
    self._update_fetcher(), name=f"Application:{self.bot.id}:update_fetcher"
                                                ^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\_bot.py", line 548, in id
    return self.bot.id
           ^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\_bot.py", line 537, in bot
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: ExtBot is not properly initialized. Call `ExtBot.initialize` before accessing this property.
2025-08-23 17:30:49 - bot - ERROR - run:2501 - Error during bot execution: ExtBot is not properly initialized. Call `ExtBot.initialize` before accessing this property.
2025-08-23 17:30:49 - root - ERROR - main:67 - Bot startup failed
Traceback (most recent call last):
  File "C:\BluePharmaBot\start_bot.py", line 53, in main
    bot.run()
    ~~~~~~~^^
  File "C:\BluePharmaBot\bot.py", line 2499, in run
    self.application.run_polling(allowed_updates=Update.ALL_TYPES)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 839, in run_polling
    return self.__run(
           ~~~~~~~~~~^
        updater_coroutine=self.updater.start_polling(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
        close_loop=close_loop,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1056, in __run
    loop.run_until_complete(self.start())
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 631, in start
    self._update_fetcher(), name=f"Application:{self.bot.id}:update_fetcher"
                                                ^^^^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\_bot.py", line 548, in id
    return self.bot.id
           ^^^^^^^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\_bot.py", line 537, in bot
    raise RuntimeError(
    ...<2 lines>...
    )
RuntimeError: ExtBot is not properly initialized. Call `ExtBot.initialize` before accessing this property.
2025-08-23 17:42:05 - error_handlers - ERROR - log_error:139 - ERROR 20250823_174205_216047: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 17:48:56 - error_handlers - ERROR - log_error:139 - ERROR 20250823_174856_285793: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 17:51:33 - error_handlers - ERROR - log_error:139 - ERROR 20250823_175133_047433: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 20:56:57 - error_handlers - ERROR - log_error:139 - ERROR 20250823_205657_598138: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 20:57:00 - error_handlers - ERROR - log_error:139 - ERROR 20250823_205700_822574: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 20:59:49 - error_handlers - ERROR - log_error:139 - ERROR 20250823_205949_237078: system - error_handler.<locals>.decorator() takes 1 positional argument but 3 were given
2025-08-23 21:01:58 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210158_631967: system - 'UserManager' object has no attribute 'is_wholesale'
2025-08-23 21:02:01 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210201_331329: system - type object 'UserRoles' has no attribute 'WHOLESALE'
2025-08-23 21:05:31 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210531_049838: system - type object 'UserRoles' has no attribute 'WHOLESALE'
2025-08-23 21:05:34 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210534_882006: system - type object 'UserRoles' has no attribute 'WHOLESALE'
2025-08-23 21:07:56 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210756_864370: system - 'StockManagementHandler' object has no attribute 'start_stock_management_hub'
2025-08-23 21:09:03 - error_handlers - ERROR - log_error:139 - ERROR 20250823_210903_660128: system - 'StockManagementHandler' object has no attribute 'start_stock_management_hub'
2025-08-23 21:10:13 - error_handlers - ERROR - log_error:139 - ERROR 20250823_211013_280183: telegram_api - Timed out
2025-08-23 21:12:35 - error_handlers - ERROR - log_error:139 - ERROR 20250823_211235_855517: system - 'StockManagementHandler' object has no attribute 'start_stock_management_hub'
2025-08-24 10:22:06 - telegram.ext.Updater - CRITICAL - polling_action_cb:359 - Updater stopped unexpectedly. Pulled updates will be ignored and pulled again on restart.
2025-08-24 10:22:06 - telegram.ext.Application - CRITICAL - stop:675 - Fetching updates was aborted due to KeyboardInterrupt(). Suppressing exception to ensure graceful shutdown.
Traceback (most recent call last):
  File "C:\BluePharmaBot\database\db_init.py", line 396, in log_audit
    cursor.execute('''
    ~~~~~~~~~~~~~~^^^^
        INSERT INTO audit_logs
        ^^^^^^^^^^^^^^^^^^^^^^
        (user_id, action, table_affected, record_id, old_values, new_values)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        VALUES (?, ?, ?, ?, ?, ?)
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, action, table_affected, record_id, old_values, new_values))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 673, in stop
    self.__update_fetcher_task.result()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1228, in _update_fetcher
    await self.__update_fetcher()
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1224, in __update_fetcher
    await self.__process_update_wrapper(update)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1239, in __process_update_wrapper
    await self._update_processor.process_update(update, self.process_update(update))
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 170, in process_update
    await self.do_process_update(update, coroutine)
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_baseupdateprocessor.py", line 195, in do_process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_application.py", line 1311, in process_update
    await coroutine
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\hp\AppData\Local\Programs\Python\Python313\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BluePharmaBot\stock_management.py", line 255, in handle_remove_confirm
    count = self.remove_all_medicines(user_id)
  File "C:\BluePharmaBot\stock_management.py", line 721, in remove_all_medicines
    self.db.log_audit(
    ~~~~~~~~~~~~~~~~~^
        user_id,
        ^^^^^^^^
    ...<4 lines>...
        "Batch soft delete (all set to is_active = 0)"
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\BluePharmaBot\database\db_init.py", line 404, in log_audit
    print(f"Error logging audit: {e}")
                                 ^^^
KeyboardInterrupt
2025-08-24 10:24:42 - error_handlers - ERROR - log_error:139 - ERROR 20250824_102442_663691: telegram_api - Query is too old and response timeout expired or query id is invalid
